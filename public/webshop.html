<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webshop</title>
    <link rel="stylesheet" href="css/style.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/api/items')
                .then(response => response.json())
                .then(items => {
                    const container = document.getElementById('items-container');
                    items.forEach(item => {
                        const itemElement = document.createElement('div');
                        itemElement.className = 'item';
                        itemElement.innerHTML = `
                            <img src="${item.img}" alt="${item.termek_nev}">
                            <h3>${item.termek_nev}</h3>
                            <p>${item.leiras}</p>
                            <p>${item.ar} HUF</p>
                            <button onclick="addToCart('${item._id}')">Kosárba</button>
                        `;
                        container.appendChild(itemElement);
                    });
                });
        });

        function addToCart(itemId) {
            fetch('/api/basket/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ itemId })
            })
            .then(response => response.json())
            .then(data => {
                alert(`Hozzáadva a kosárhoz: ${data.item.termek_nev}`);
                updateCart();
            });
        }

        function updateCart() {
            fetch('/api/basket')
                .then(response => response.json())
                .then(items => {
                    const cartContainer = document.getElementById('cart-items');
                    cartContainer.innerHTML = '';
                    let totalCost = 0;
                    items.forEach(item => {
                        totalCost += item.ar;
                        const itemElement = document.createElement('div');
                        itemElement.className = 'cart-item';
                        itemElement.innerHTML = `
                            <p>${item.termek_nev} - ${item.ar} HUF</p>
                        `;
                        cartContainer.appendChild(itemElement);
                    });
                    document.getElementById('total-cost').innerText = totalCost + ' HUF';
                });
        }
    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1>Magyar Fight Shop</h1>
            <div class="cart-icon" onclick="document.getElementById('cart-modal').style.display='block'">
                <img src="data:image/png;base64,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" alt="Cart" />
            </div>
        </div>
    </header>
    <main>
        <div class="shop-container">
            <h2>Termékek</h2>
            <div id="items-container"></div>
        </div>
    </main>
    <footer>
        <p>&copy; Magyar Fight Shop</p>
    </footer>
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('cart-modal').style.display='none'">&times;</span>
            <h2>Cart</h2>
            <div id="cart-items"></div>
            <p>Total: <span id="total-cost">0 HUF</span></p>
        </div>
    </div>
</body>
</html>
